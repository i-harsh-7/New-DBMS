Table creation -------


CREATE TABLE Bank (
    bk_code NUMBER PRIMARY KEY,
    bk_name VARCHAR2(25) NOT NULL,
    bk_address VARCHAR2(25) NOT NULL
);

CREATE TABLE Branch (
    br_id NUMBER PRIMARY KEY,
    br_name VARCHAR2(25) NOT NULL,
    br_address VARCHAR2(25) NOT NULL,
    bk_code NUMBER,
    CONSTRAINT fk_branch_bank FOREIGN KEY (bk_code) REFERENCES Bank(bk_code) ON DELETE CASCADE
);

CREATE TABLE Customer (
    cust_ID NUMBER PRIMARY KEY,
    cust_name VARCHAR2(25) NOT NULL,
    phone_no VARCHAR2(15) UNIQUE,
    address VARCHAR2(25) NOT NULL
);

CREATE TABLE Account (
    acc_no NUMBER PRIMARY KEY,
    acc_type VARCHAR2(25) NOT NULL,
    balance NUMBER(15,2) CHECK (balance >= 0),
    br_id NUMBER,
    CONSTRAINT fk_account_branch FOREIGN KEY (br_id) REFERENCES Branch(br_id) ON DELETE SET NULL
);

CREATE TABLE Customer_Account (
    cust_ID NUMBER,
    acc_no NUMBER,
    PRIMARY KEY (cust_ID, acc_no),
    CONSTRAINT fk_cust_acc_customer FOREIGN KEY (cust_ID) REFERENCES Customer(cust_ID) ON DELETE CASCADE,
    CONSTRAINT fk_cust_acc_account FOREIGN KEY (acc_no) REFERENCES Account(acc_no) ON DELETE CASCADE
);

CREATE TABLE Loan (
    loan_ID NUMBER PRIMARY KEY,
    loan_type VARCHAR2(25) NOT NULL,
    amount NUMBER(15,2) CHECK (amount > 0),
    br_id NUMBER,
    CONSTRAINT fk_loan_branch FOREIGN KEY (br_id) REFERENCES Branch(br_id) ON DELETE SET NULL
);

CREATE TABLE Customer_Loan (
    cust_ID NUMBER,
    loan_ID NUMBER,
    PRIMARY KEY (cust_ID, loan_ID),
    CONSTRAINT fk_cust_loan_customer FOREIGN KEY (cust_ID) REFERENCES Customer(cust_ID) ON DELETE CASCADE,
    CONSTRAINT fk_cust_loan_loan FOREIGN KEY (loan_ID) REFERENCES Loan(loan_ID) ON DELETE CASCADE
);




